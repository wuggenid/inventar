<html>
    <head>
        <link rel="stylesheet" href="css/bootstrap.min.css">
        <title>Inventur</title>
    </head>
    <body>
        <div id="outerContainer" class="container well" style="text-align: center;">
            <table align="center" style="float:left;">
                <tr>
                    <td>Objekt</td>
                    <td>Stiege/ZiNo</td>
                    <td>Beschreibung</td>
                </tr>
                <tr>
                    <td><input id="tbxObj" type="text" placeholder="Obj" style="width: 3em;"/></td>
                    <td><input id="tbxZiNo" type="text" placeholder="ZiNo" style="width: 7em;"/></td>
                    <td><input id="tbxDes" type="text" placeholder="Beschr." /></td>
                </tr>   
            </table>
            <br />
            <br />
            <br />
            <br />
            <button class="btn btn-success" style="float:left;" onclick="newItem()">Neuer Gegenstand</button>
            <br />
            <br />
            <table id="items" style="float: left; width: 100%">
                <tr>
                    <th></th>
                    <th>Gegenstand</th>
                    <th>Anzahl</th>
                </tr>
            </table>
            <div style="float: right";>
                <button class="btn btn-success">Speichern</button>
            </div>
            
        </div>
    </body>
    <script language="JavaScript">
        var table = document.getElementById("rooms");
        
        var rooms = JSON.parse(localStorage.getItem("rooms"));
        
        var newRoom = new Array();
        
        if (rooms!=null)
        {
            newRoom['id'] = rooms.length;

            console.log(rooms.length);
        }
        else
            newRoom['id'] = 0;
        
        
        function newItem()
        {
            var itemId = JSON.parse(localStorage.getItem('items'));
            if (itemId == null)
                itemId = new Array();
            itemId = itemId.length+1;
            
            var itemTable = document.getElementById('items');
            var row = itemTable.insertRow(1);
            
            var karteien = JSON.parse(localStorage.getItem("karteien"));
            
            var cell = row.insertCell(-1);
            
            for (var i = 0;i<karteien.length;i++)
            {
                if (!("deleted" in karteien[i]))
                    cell.innerHTML += "<option data-id=\""+karteien[i]['id']+"\">"+karteien[i]['beschr']+"</option>";
            }
            cell.innerHTML = "<select id=\"itemSelect\" class=\"item form-control\">" + cell.innerHTML;
            cell.innerHTML += "</select>";
            
            
            var cell3 = row.insertCell(0);
            cell3.innerHTML = "<button data-id=\"" + itemId + "\"class=\"btn btn-danger item\" style=\"float:left;\" onclick=\"deleteItem(this)\">L&ouml;schen</button>";
            cell3.style.paddingRight = 0;
            
            
            
            var cell2 = row.insertCell(-1);
            cell2.innerHTML = "<input type=\"text\" class=\"count form-control\" style=\"width:30%; padding-right: 0;\" />";
            
            var items = JSON.parse(localStorage.getItem('items'));
            if (items == null)
                items = new Array();
            var newItem = {};
            newItem['id'] = itemId;
            var itemSelect = document.getElementById("itemSelect");
            newItem['k_id']  = itemSelect.options[itemSelect.selectedIndex].getAttribute("data-id");
            console.log(newItem);
            items.push()
        }
        function deleteItem(e)
        {
            for (var i = 0;i<items.length;i++)
            {
                
            }
        }
        
    </script>
    <style type="text/css">
        TABLE TR TD
        {
            padding-right: 5em;
        }
        #outerContainer
        {
            margin-top: 15em;
        }
        #items TR TH
        {
            padding-right: 5em;
        }
    </style>
</html>